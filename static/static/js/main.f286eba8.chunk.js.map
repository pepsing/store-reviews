{"version":3,"sources":["components/AppList.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["Paragraph","Typography","PAGE_SIZE","AppList","apps","setApps","useState","selectedApp","setSelectedApp","reviews","setReviews","loading","setLoading","isModalVisible","setIsModalVisible","form","Form","useForm","refreshing","setRefreshing","editingApp","setEditingApp","currentPage","setCurrentPage","ios","android","authModalVisible","setAuthModalVisible","authCode","setAuthCode","localStorage","getItem","authAction","setAuthAction","Promise","resolve","countries","setCountries","useEffect","async","response","fetch","data","json","error","console","message","loadCountries","fetchApps","axios","get","fetchReviews","appId","executeWithAuth","action","_error$response","status","removeItem","interceptor","interceptors","request","use","config","newConfig","headers","eject","handleRefreshReviews","platform","post","success","iosReviews","filter","review","androidReviews","calculateAverageRating","length","sum","reduce","acc","rating","Number","toFixed","iosAverageRating","androidAverageRating","_jsxs","style","padding","children","Row","gutter","justify","align","_jsx","Col","Button","type","icon","PlusOutlined","onClick","marginTop","map","app","xs","sm","md","lg","Card","title","name","extra","e","stopPropagation","EditOutlined","setFieldsValue","Popconfirm","onConfirm","delete","id","handleDeleteApp","okText","cancelText","danger","DeleteOutlined","hoverable","app_store_id","play_store_id","Space","size","SyncOutlined","spin","limit","handleRefreshLatestReviews","DownloadOutlined","window","open","handleExportReviews","textAlign","Spin","_Fragment","ResponsiveContainer","width","height","LineChart","calculateRatingStats","monthlyStats","forEach","date","Date","created_at","monthKey","getFullYear","String","getMonth","padStart","count","Object","entries","sort","_ref","_ref2","dateA","dateB","localeCompare","_ref3","stats","CartesianGrid","strokeDasharray","XAxis","dataKey","YAxis","domain","Tooltip","formatter","value","labelFormatter","label","Legend","Line","stroke","connectNulls","Tabs","defaultActiveKey","TabPane","tab","slice","span","repeat","ellipsis","rows","expandable","symbol","content","author","toLocaleString","Pagination","current","onChange","page","prev","total","pageSize","showTotal","Modal","visible","onCancel","resetFields","footer","onFinish","put","values","layout","Item","rules","required","Input","Select","Option","initialValue","_ref4","code","_ref5","pattern","placeholder","htmlType","onOk","setItem","Password","target","Header","Content","Layout","App","background","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","React","StrictMode","document","getElementById"],"mappings":"meA+CA,MAAM,UAAEA,GAAcC,IAChBC,EAAY,GAELC,EAAoBA,KAC/B,MAAOC,EAAMC,GAAWC,mBAAgB,KACjCC,EAAaC,GAAkBF,mBAAqB,OACpDG,EAASC,GAAcJ,mBAAmB,KAC1CK,EAASC,GAAcN,oBAAS,IAChCO,EAAgBC,GAAqBR,oBAAS,IAC9CS,GAAQC,IAAKC,WACbC,EAAYC,GAAiBb,oBAAS,IACtCc,EAAYC,GAAiBf,mBAAqB,OAClDgB,EAAaC,GAAkBjB,mBAA2C,CAC/EkB,IAAK,EACLC,QAAS,KAEJC,EAAkBC,GAAuBrB,oBAAS,IAClDsB,EAAUC,GAAevB,mBAASwB,aAAaC,QAAQ,aAAe,KACtEC,EAAYC,IAAiB3B,oBAA8B,IAAM4B,QAAQC,aACzEC,GAAWC,IAAgB/B,mBAAkC,CAAC,GAGrEgC,qBAAU,KACcC,WACpB,IACE,MAAMC,QAAiBC,MAAM,0BACvBC,QAAaF,EAASG,OAC5BN,GAAaK,EACf,CAAE,MAAOE,GACPC,QAAQD,MAAM,oDAAaA,GAC3BE,IAAQF,MAAM,mDAChB,GAEFG,EAAe,GACd,IAGHT,qBAAU,KACRU,IAAW,GACV,IAEH,MAAMA,GAAYT,UAChB,IACE,MAAMC,QAAiBS,IAAMC,IAAI,aACjC7C,EAAQmC,EAASE,KACnB,CAAE,MAAOE,GACPE,IAAQF,MAAM,mDAChB,GAIIO,GAAeZ,UACnB3B,GAAW,GACX,IACE,MAAM4B,QAAiBS,IAAMC,IAAI,aAAaE,aAC9C1C,EAAW8B,EAASE,KACtB,CAAE,MAAOE,GACPE,IAAQF,MAAM,uCAChB,CAAC,QACChC,GAAW,EACb,GAIIyC,GAAkBd,UACtB,IAAKX,EAGH,OAFAK,IAAc,IAAMqB,SACpB3B,GAAoB,GAGtB,UACQ2B,GACR,CAAE,MAAOV,GAAa,IAADW,EACnB,GAA+B,OAAb,QAAdA,EAAAX,EAAMJ,gBAAQ,IAAAe,OAAA,EAAdA,EAAgBC,QAOlB,MAAMZ,EANNE,IAAQF,MAAM,kCACdf,EAAY,IACZC,aAAa2B,WAAW,YACxBxB,IAAc,IAAMqB,IACpB3B,GAAoB,EAIxB,GAIFW,qBAAU,KACR,MAAMoB,EAAcT,IAAMU,aAAaC,QAAQC,KAAKC,IAClD,MAAMC,EAAY,IAAKD,GAKvB,OAJAC,EAAUC,QAAUD,EAAUC,SAAW,CAAC,EACtCpC,IACFmC,EAAUC,QAAQ,eAAiBpC,GAE9BmC,CAAS,IAGlB,MAAO,KACLd,IAAMU,aAAaC,QAAQK,MAAMP,EAAY,CAC9C,GACA,CAAC9B,IAGJ,MAoEMsC,GAAuB3B,MAAOa,EAAee,KACjDhD,GAAc,GACd,UACQ8B,IAAMmB,KAAK,aAAahB,YAAiB,CAAEe,aACjDrB,IAAQuB,SAAwB,QAAbF,EAAqB,YAAc,cAAtC,+CAEVhB,GAAaC,EACrB,CAAE,MAAOR,GACPE,IAAQF,OAAsB,QAAbuB,EAAqB,YAAc,cAAtC,wCAChB,CAAC,QACChD,GAAc,EAChB,GA+BImD,GAAa7D,EAAQ8D,QAAOC,GAA8B,QAApBA,EAAOL,WAC7CM,GAAiBhE,EAAQ8D,QAAOC,GAA8B,YAApBA,EAAOL,WAGjDO,GAA0BjE,IAC9B,GAAuB,IAAnBA,EAAQkE,OAAc,OAAO,EACjC,MAAMC,EAAMnE,EAAQoE,QAAO,CAACC,EAAKN,IAAWM,EAAMN,EAAOO,QAAQ,GACjE,OAAOC,QAAQJ,EAAMnE,EAAQkE,QAAQM,QAAQ,GAAG,EAG5CC,GAAmBR,GAAuBJ,IAC1Ca,GAAuBT,GAAuBD,IAEpD,OACEW,eAAA,OAAKC,MAAO,CAAEC,QAAS,QAASC,SAAA,CAC9BH,eAACI,IAAG,CAACC,OAAQ,CAAC,GAAI,IAAKC,QAAQ,gBAAgBC,MAAM,SAAQJ,SAAA,CAC3DK,cAACC,IAAG,CAAAN,SACFK,cAAA,MAAAL,SAAI,+BAENK,cAACC,IAAG,CAAAN,SACFK,cAACE,IAAM,CACLC,KAAK,UACLC,KAAMJ,cAACK,IAAY,IACnBC,QAASA,IAAMpF,GAAkB,GAAMyE,SACxC,kCAMLK,cAACJ,IAAG,CAACC,OAAQ,CAAC,GAAI,IAAKJ,MAAO,CAAEc,UAAW,QAASZ,SACjDnF,EAAKgG,KAAIC,GACRT,cAACC,IAAG,CAAcS,GAAI,GAAIC,GAAI,GAAIC,GAAI,EAAGC,GAAI,EAAElB,SAC7CH,eAACsB,IAAI,CACHC,MAAON,EAAIO,KACXC,MACEzB,eAAA,OAAKc,QAASY,GAAKA,EAAEC,kBAAkBxB,SAAA,CACrCK,cAACE,IAAM,CACLC,KAAK,OACLC,KAAMJ,cAACoB,IAAY,IACnBd,QAASA,KACP7E,EAAcgF,GACdtF,EAAKkG,eAAeZ,EAAI,IAG5BT,cAACsB,IAAU,CACTP,MAAM,qEACNQ,UAAWA,IAvIL5E,iBAChBc,IAAgBd,gBACdU,IAAMmE,OAAO,aAAahE,KAChCN,IAAQuB,QAAQ,yCACD,OAAX9D,QAAW,IAAXA,OAAW,EAAXA,EAAa8G,MAAOjE,GACtB5C,EAAe,MAEjBwC,IAAW,GACX,EA+H+BsE,CAAgBjB,EAAIgB,IACrCE,OAAO,eACPC,WAAW,eAAIjC,SAEfK,cAACE,IAAM,CAACC,KAAK,OAAO0B,QAAM,EAACzB,KAAMJ,cAAC8B,IAAc,WAItDC,WAAS,EACTzB,QAASA,KACP1F,EAAe6F,GACflD,GAAakD,EAAIgB,GAAG,EACpB9B,SAAA,CAEFH,eAAA,KAAAG,SAAA,CAAG,iBAAKc,EAAIlC,YACXkC,EAAIuB,cAAgBxC,eAAA,KAAAG,SAAA,CAAG,iBAAec,EAAIuB,gBAC1CvB,EAAIwB,eAAiBzC,eAAA,KAAAG,SAAA,CAAG,kBAAgBc,EAAIwB,qBA/BvCxB,EAAIgB,QAqCjB9G,GACC6E,eAACsB,IAAI,CAACrB,MAAO,CAAEc,UAAW,QAASZ,SAAA,CACjCH,eAACI,IAAG,CAACE,QAAQ,gBAAgBC,MAAM,SAAQJ,SAAA,CACzCK,cAACC,IAAG,CAAAN,SACFH,eAAA,MAAAG,SAAA,CAAKhF,EAAYqG,KAAK,iCAExBhB,cAACC,IAAG,CAAAN,SACFH,eAAC0C,IAAK,CAACC,KAAK,SAAQxC,SAAA,CACQ,YAAzBhF,EAAY4D,UACXyB,cAACE,IAAM,CACLC,KAAK,UACLC,KAAMJ,cAACoC,IAAY,CAACC,KAAM/G,IAC1BgF,QAASA,IAAMhC,GAAqB3D,EAAY8G,GAAI,OACpD1G,QAASO,EAAWqE,SACrB,2BAIuB,QAAzBhF,EAAY4D,UACXyB,cAACE,IAAM,CACLC,KAAK,UACLC,KAAMJ,cAACoC,IAAY,CAACC,KAAM/G,IAC1BgF,QAASA,IAAMhC,GAAqB3D,EAAY8G,GAAI,WACpD1G,QAASO,EAAWqE,SACrB,4BAIHK,cAACE,IAAM,CACLC,KAAK,UACLC,KAAMJ,cAACoC,IAAY,CAACC,KAAM/G,IAC1BgF,QAASA,IA/HU3D,WACjCpB,GAAc,GACd,UACQ8B,IAAMmB,KAAK,aAAahB,mBAAwB,CAAE8E,MAAO,MAC/DpF,IAAQuB,QAAQ,0DAEVlB,GAAaC,EACrB,CAAE,MAAOR,GACPE,IAAQF,MAAM,mDAChB,CAAC,QACCzB,GAAc,EAChB,GAoH6BgH,CAA2B5H,EAAY8G,IACtD1G,QAASO,EAAWqE,SACrB,yCAGDK,cAACE,IAAM,CACLC,KAAK,UACLC,KAAMJ,cAACwC,IAAgB,IACvBlC,QAASA,IAxHG3D,WAC1B,IACEO,IAAQnC,QAAQ,sDAAe,GAE/B0H,OAAOC,KAAK,aAAalF,WAAgB,UACzCN,IAAQuB,QAAQ,uCAClB,CAAE,MAAOzB,GACPE,IAAQF,MAAM,uCAChB,GAgH6B2F,CAAoBhI,EAAY8G,IAAI9B,SACpD,qCAMN5E,EACCiF,cAAA,OAAKP,MAAO,CAAEmD,UAAW,SAAUlD,QAAS,QAASC,SACnDK,cAAC6C,IAAI,MAGPrD,eAAAsD,WAAA,CAAAnD,SAAA,CACEK,cAAC+C,IAAmB,CAACC,MAAM,OAAOC,OAAQ,IAAItD,SAC5CH,eAAC0D,IAAS,CAACpG,KAtMIqG,MAC3B,MAAMC,EAAiC,CAAC,EAkBxC,OAhBAvI,EAAQwI,SAASzE,IACf,MAAM0E,EAAO,IAAIC,KAAK3E,EAAO4E,YACvBC,EAAW,GAAGH,EAAKI,iBAAiBC,OAAOL,EAAKM,WAAa,GAAGC,SAAS,EAAG,OAE7ET,EAAaK,KAChBL,EAAaK,GAAY,CACvB7H,IAAK,CAAEoD,IAAK,EAAG8E,MAAO,GACtBjI,QAAS,CAAEmD,IAAK,EAAG8E,MAAO,KAI9BV,EAAaK,GAAU7E,EAAOL,UAAUS,KAAOJ,EAAOO,OACtDiE,EAAaK,GAAU7E,EAAOL,UAAUuF,OAAS,CAAC,IAI7CC,OAAOC,QAAQZ,GACnBa,MAAK,CAAAC,EAAAC,KAAA,IAAEC,GAAMF,GAAGG,GAAMF,EAAA,OAAKC,EAAME,cAAcD,EAAM,IACrD7D,KAAI+D,IAAoB,IAAlBjB,EAAMkB,GAAMD,EAIjB,MAAO,CACLjB,OACA1H,IALgB4I,EAAM5I,IAAIkI,MAAQ,EAAIU,EAAM5I,IAAIoD,IAAMwF,EAAM5I,IAAIkI,MAAQ,KAMxEjI,QALoB2I,EAAM3I,QAAQiI,MAAQ,EAAIU,EAAM3I,QAAQmD,IAAMwF,EAAM3I,QAAQiI,MAAQ,KAMzF,GACD,EAwKyBX,GAAuBxD,SAAA,CACtCK,cAACyE,IAAa,CAACC,gBAAgB,QAC/B1E,cAAC2E,IAAK,CAACC,QAAQ,SACf5E,cAAC6E,IAAK,CAACC,OAAQ,CAAC,EAAG,KACnB9E,cAAC+E,IAAO,CACNC,UAAYC,GAAkBA,EAAQA,EAAM5F,QAAQ,GAAK,2BACzD6F,eAAiBC,GAAU,GAAGA,+BAEhCnF,cAACoF,IAAM,IACPpF,cAACqF,IAAI,CACHlF,KAAK,WACLyE,QAAQ,MACR5D,KAAK,MACLsE,OAAO,UACPC,cAAY,IAEdvF,cAACqF,IAAI,CACHlF,KAAK,WACLyE,QAAQ,UACR5D,KAAK,UACLsE,OAAO,UACPC,cAAY,SAKlB/F,eAAA,OAAKC,MAAO,CAAEc,UAAW,QAASZ,SAAA,CAChCK,cAAA,MAAAL,SAAI,6BACJH,eAACgG,IAAI,CAACC,iBAAiB,MAAK9F,SAAA,CAC1BH,eAACgG,IAAKE,QAAO,CACXC,IAAK,qBAAWrG,YAAqBK,SAAA,CAGrCH,eAACI,IAAG,CAACC,OAAQ,CAAC,GAAI,IAAIF,SAAA,CACnBjB,GACEkH,OACElK,EAAYE,IAAM,GAAKtB,EACxBoB,EAAYE,IAAMtB,GAEnBkG,KAAI5B,GACHoB,cAACC,IAAG,CAAiB4F,KAAM,GAAGlG,SAC5BH,eAACsB,IAAI,CAACqB,KAAK,QAAOxC,SAAA,CAChBH,eAAA,KAAAG,SAAA,CAAG,iBAAK,SAAImG,OAAOlH,EAAOO,WAC1BK,eAAA,KAAAG,SAAA,CAAG,gBACDK,cAAC5F,EAAS,CACR2L,SAAU,CACRC,KAAM,EACNC,YAAY,EACZC,OAAQ,gBACRvG,SAEDf,EAAOuH,aAGZ3G,eAAA,KAAAG,SAAA,CAAG,iBAAKf,EAAOwH,UACf5G,eAAA,KAAAG,SAAA,CAAG,iBAAK,IAAI4D,KAAK3E,EAAO4E,YAAY6C,wBAf9BzH,EAAO6C,MAmBE,IAAtB/C,GAAWK,QACViB,cAACC,IAAG,CAAC4F,KAAM,GAAGlG,SACZK,cAACc,IAAI,CAACqB,KAAK,QAAOxC,SAChBK,cAAA,KAAAL,SAAG,yCAKVjB,GAAWK,OAAS,GACnBiB,cAAA,OAAKP,MAAO,CAAEmD,UAAW,QAASrC,UAAW,QAASZ,SACpDK,cAACsG,IAAU,CACTC,QAAS7K,EAAYE,IACrB4K,SAAWC,GAAS9K,GAAe+K,IAAI,IAAUA,EAAM9K,IAAK6K,MAC5DE,MAAOjI,GAAWK,OAClB6H,SAAUtM,EACVuM,UAAYF,GAAU,UAAKA,6BA3C7B,OAgDNnH,eAACgG,IAAKE,QAAO,CACXC,IAAK,yBAAepG,YAAyBI,SAAA,CAG7CH,eAACI,IAAG,CAACC,OAAQ,CAAC,GAAI,IAAIF,SAAA,CACnBd,GACE+G,OACElK,EAAYG,QAAU,GAAKvB,EAC5BoB,EAAYG,QAAUvB,GAEvBkG,KAAI5B,GACHoB,cAACC,IAAG,CAAiB4F,KAAM,GAAGlG,SAC5BH,eAACsB,IAAI,CAACqB,KAAK,QAAOxC,SAAA,CAChBH,eAAA,KAAAG,SAAA,CAAG,iBAAK,SAAImG,OAAOlH,EAAOO,WAC1BK,eAAA,KAAAG,SAAA,CAAG,gBACDK,cAAC5F,EAAS,CACR2L,SAAU,CACRC,KAAM,EACNC,YAAY,EACZC,OAAQ,gBACRvG,SAEDf,EAAOuH,aAGZ3G,eAAA,KAAAG,SAAA,CAAG,iBAAKf,EAAOwH,UACf5G,eAAA,KAAAG,SAAA,CAAG,iBAAK,IAAI4D,KAAK3E,EAAO4E,YAAY6C,wBAf9BzH,EAAO6C,MAmBM,IAA1B5C,GAAeE,QACdiB,cAACC,IAAG,CAAC4F,KAAM,GAAGlG,SACZK,cAACc,IAAI,CAACqB,KAAK,QAAOxC,SAChBK,cAAA,KAAAL,SAAG,6CAKVd,GAAeE,OAAS,GACvBiB,cAAA,OAAKP,MAAO,CAAEmD,UAAW,QAASrC,UAAW,QAASZ,SACpDK,cAACsG,IAAU,CACTC,QAAS7K,EAAYG,QACrB2K,SAAWC,GAAS9K,GAAe+K,IAAI,IAAUA,EAAM7K,QAAS4K,MAChEE,MAAO9H,GAAeE,OACtB6H,SAAUtM,EACVuM,UAAYF,GAAU,UAAKA,6BA3C7B,uBAuDlB3G,cAAC8G,IAAK,CACJ/F,MAAOvF,EAAa,2BAAS,2BAC7BuL,QAAS9L,KAAoBO,EAC7BwL,SAAUA,KACR9L,GAAkB,GAClBO,EAAc,MACdN,EAAK8L,aAAa,EAEpBC,OAAQ,KAAKvH,SAEbH,eAACpE,IAAI,CACHD,KAAMA,EACNgM,SAAU3L,EAjXImB,gBACdc,IAAgBd,gBACdU,IAAM+J,IAAI,aAAuB,OAAV5L,QAAU,IAAVA,OAAU,EAAVA,EAAYiG,KAAM4F,GAC/CnK,IAAQuB,QAAQ,wCAChBhD,EAAc,MACdN,EAAK8L,cACL7J,IAAW,GACX,EAlBiBT,gBACbc,IAAgBd,gBACdU,IAAMmB,KAAK,YAAa6I,GAC9BnK,IAAQuB,QAAQ,wCAChBvD,GAAkB,GAClBC,EAAK8L,cACL7J,IAAW,GACX,EAsXIkK,OAAO,WAAU3H,SAAA,CAEjBK,cAAC5E,IAAKmM,KAAI,CACRvG,KAAK,OACLmE,MAAM,2BACNqC,MAAO,CAAC,CAAEC,UAAU,IAAQ9H,SAE5BK,cAAC0H,IAAK,MAGR1H,cAAC5E,IAAKmM,KAAI,CACRvG,KAAK,WACLmE,MAAM,eACNqC,MAAO,CAAC,CAAEC,UAAU,IAAQ9H,SAE5BH,eAACmI,IAAM,CAAAhI,SAAA,CACLK,cAAC2H,IAAOC,OAAM,CAAC3C,MAAM,MAAKtF,SAAC,QAC3BK,cAAC2H,IAAOC,OAAM,CAAC3C,MAAM,UAAStF,SAAC,YAC/BK,cAAC2H,IAAOC,OAAM,CAAC3C,MAAM,OAAMtF,SAAC,4BAIhCK,cAAC5E,IAAKmM,KAAI,CACRvG,KAAK,oBACLmE,MAAM,yBACN0C,aAAa,KAAIlI,SAEjBK,cAAC2H,IAAM,CAAAhI,SACJoE,OAAOC,QAAQxH,IAAWgE,KAAIsH,IAAA,IAAEC,EAAM/G,GAAK8G,EAAA,OAC1C9H,cAAC2H,IAAOC,OAAM,CAAY3C,MAAO8C,EAAKpI,SACnCqB,GADiB+G,EAEJ,QAKtB/H,cAAC5E,IAAKmM,KAAI,CACRvG,KAAK,qBACLmE,MAAM,0BACN0C,aAAa,KAAIlI,SAEjBK,cAAC2H,IAAM,CAAAhI,SACJoE,OAAOC,QAAQxH,IAAWgE,KAAIwH,IAAA,IAAED,EAAM/G,GAAKgH,EAAA,OAC1ChI,cAAC2H,IAAOC,OAAM,CAAY3C,MAAO8C,EAAKpI,SACnCqB,GADiB+G,EAEJ,QAKtB/H,cAAC5E,IAAKmM,KAAI,CACRvG,KAAK,eACLmE,MAAM,eACNqC,MAAO,CACL,CACES,QAAS,QACT/K,QAAS,gDAEXyC,SAEFK,cAAC0H,IAAK,CAACQ,YAAY,kCAGrBlI,cAAC5E,IAAKmM,KAAI,CACRvG,KAAK,gBACLmE,MAAM,gBAAexF,SAErBK,cAAC0H,IAAK,MAGR1H,cAAC5E,IAAKmM,KAAI,CAAA5H,SACRK,cAACE,IAAM,CAACC,KAAK,UAAUgI,SAAS,SAAQxI,SAAC,wBAO/CK,cAAC8G,IAAK,CACJ/F,MAAM,uCACNgG,QAASjL,EACTsM,KAAMzL,UACJ,IACE,IAAKX,EAEH,YADAkB,IAAQF,MAAM,oDAGVZ,IACNF,aAAamM,QAAQ,WAAYrM,GACjCD,GAAoB,EACtB,CAAE,MAAOiB,GACPE,IAAQF,MAAM,4BACdd,aAAa2B,WAAW,WAC1B,GAEFmJ,SAAUA,KACRjL,GAAoB,GACpBM,IAAc,IAAMC,QAAQC,YAC5BN,EAAY,GAAG,EACf0D,SAEFK,cAAC0H,IAAMY,SAAQ,CACbrD,MAAOjJ,EACPwK,SAAUtF,GAAKjF,EAAYiF,EAAEqH,OAAOtD,OACpCiD,YAAY,6CAGZ,E,OCxnBV,MAAM,OAAEM,EAAM,QAAEC,GAAYC,IAebC,MAbOA,IAElBnJ,eAACkJ,IAAM,CAAA/I,SAAA,CACLK,cAACwI,EAAM,CAAC/I,MAAO,CAAEmJ,WAAY,OAAQlJ,QAAS,UAAWC,SACvDK,cAAA,MAAAL,SAAI,uDAENK,cAACyI,EAAO,CAAA9I,SACNK,cAACzF,EAAO,SCADsO,MAZUC,IACnBA,GAAeA,aAAuBC,UACxC,8BAAqBC,MAAK9E,IAAkD,IAAjD,OAAE+E,EAAM,OAAEC,EAAM,OAAEC,EAAM,OAAEC,EAAM,QAAEC,GAASnF,EACpE+E,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,EAAY,GAExB,ECLFQ,IAASC,OACPvJ,cAACwJ,IAAMC,WAAU,CAAA9J,SACfK,cAAC2I,EAAG,MAENe,SAASC,eAAe,SAM1Bd,G","file":"static/js/main.f286eba8.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Card, Row, Col, Button, Modal, Form, Input, Select, Spin, message, Popconfirm, Tabs, Pagination, Typography, Space } from 'antd';\nimport { PlusOutlined, SyncOutlined, EditOutlined, DeleteOutlined, DownloadOutlined } from '@ant-design/icons';\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from 'recharts';\nimport axios, { AxiosRequestConfig } from 'axios';\n\ninterface App {\n  id: number;\n  name: string;\n  platform: string;\n  app_store_id?: string;\n  play_store_id?: string;\n}\n\ninterface Review {\n  id: number;\n  rating: number;\n  content: string;\n  author: string;\n  platform: 'ios' | 'android';\n  created_at: string;\n}\n\ninterface ChartDatum {\n  date: string;\n  ios: number | null;\n  android: number | null;\n}\n\ninterface RatingStats {\n  date: string;\n  platform: string;\n  average_rating: number;\n}\n\ninterface PlatformStats {\n  sum: number;\n  count: number;\n}\n\ntype MonthlyStatsType = {\n  [key: string]: {\n    ios: PlatformStats;\n    android: PlatformStats;\n  };\n};\n\nconst { Paragraph } = Typography;\nconst PAGE_SIZE = 10; // 每页显示的评论数\n\nexport const AppList: React.FC = () => {\n  const [apps, setApps] = useState<App[]>([]);\n  const [selectedApp, setSelectedApp] = useState<App | null>(null);\n  const [reviews, setReviews] = useState<Review[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [isModalVisible, setIsModalVisible] = useState(false);\n  const [form] = Form.useForm();\n  const [refreshing, setRefreshing] = useState(false);\n  const [editingApp, setEditingApp] = useState<App | null>(null);\n  const [currentPage, setCurrentPage] = useState<{ ios: number; android: number }>({\n    ios: 1,\n    android: 1\n  });\n  const [authModalVisible, setAuthModalVisible] = useState(false);\n  const [authCode, setAuthCode] = useState(localStorage.getItem('authCode') || '');\n  const [authAction, setAuthAction] = useState<() => Promise<void>>(() => Promise.resolve());\n  const [countries, setCountries] = useState<{[key: string]: string}>({});\n\n  // 加载国家配置\n  useEffect(() => {\n    const loadCountries = async () => {\n      try {\n        const response = await fetch('/config/countries.json');\n        const data = await response.json();\n        setCountries(data);\n      } catch (error) {\n        console.error('加载国家配置失败:', error);\n        message.error('加载国家配置失败');\n      }\n    };\n    loadCountries();\n  }, []);\n\n  // 获取应用列表\n  useEffect(() => {\n    fetchApps();\n  }, []);\n\n  const fetchApps = async () => {\n    try {\n      const response = await axios.get('/api/apps');\n      setApps(response.data);\n    } catch (error) {\n      message.error('获取应用列表失败');\n    }\n  };\n\n  // 获取应用评论\n  const fetchReviews = async (appId: number) => {\n    setLoading(true);\n    try {\n      const response = await axios.get(`/api/apps/${appId}/reviews`);\n      setReviews(response.data);\n    } catch (error) {\n      message.error('获取评论失败');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // 验证授权码并执行操作\n  const executeWithAuth = async (action: () => Promise<void>) => {\n    if (!authCode) {\n      setAuthAction(() => action);\n      setAuthModalVisible(true);\n      return;\n    }\n    try {\n      await action();\n    } catch (error: any) {\n      if (error.response?.status === 401) {\n        message.error('授权码无效');\n        setAuthCode('');\n        localStorage.removeItem('authCode');\n        setAuthAction(() => action);\n        setAuthModalVisible(true);\n      } else {\n        throw error;\n      }\n    }\n  };\n\n  // 设置请求头\n  useEffect(() => {\n    const interceptor = axios.interceptors.request.use((config: AxiosRequestConfig) => {\n      const newConfig = { ...config };\n      newConfig.headers = newConfig.headers || {};\n      if (authCode) {\n        newConfig.headers['X-Auth-Code'] = authCode;\n      }\n      return newConfig;\n    });\n\n    return () => {\n      axios.interceptors.request.eject(interceptor);\n    };\n  }, [authCode]);\n\n  // 添加新应用\n  const handleAddApp = async (values: any) => {\n    await executeWithAuth(async () => {\n      await axios.post('/api/apps', values);\n      message.success('添加应用成功');\n      setIsModalVisible(false);\n      form.resetFields();\n      fetchApps();\n    });\n  };\n\n  // 修改应用\n  const handleEditApp = async (values: any) => {\n    await executeWithAuth(async () => {\n      await axios.put(`/api/apps/${editingApp?.id}`, values);\n      message.success('修改应用成功');\n      setEditingApp(null);\n      form.resetFields();\n      fetchApps();\n    });\n  };\n\n  // 删除应用\n  const handleDeleteApp = async (appId: number) => {\n    await executeWithAuth(async () => {\n      await axios.delete(`/api/apps/${appId}`);\n      message.success('删除应用成功');\n      if (selectedApp?.id === appId) {\n        setSelectedApp(null);\n      }\n      fetchApps();\n    });\n  };\n\n  // 计算评分统计数据\n  const calculateRatingStats = (): ChartDatum[] => {\n    const monthlyStats: MonthlyStatsType = {};\n    \n    reviews.forEach((review: Review) => {\n      const date = new Date(review.created_at);\n      const monthKey = `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}`;\n      \n      if (!monthlyStats[monthKey]) {\n        monthlyStats[monthKey] = {\n          ios: { sum: 0, count: 0 },\n          android: { sum: 0, count: 0 }\n        };\n      }\n      \n      monthlyStats[monthKey][review.platform].sum += review.rating;\n      monthlyStats[monthKey][review.platform].count += 1;\n    });\n    \n    // 转换为图表所需的数据格式\n    return Object.entries(monthlyStats)\n      .sort(([dateA], [dateB]) => dateA.localeCompare(dateB))\n      .map(([date, stats]) => {\n        const iosRating = stats.ios.count > 0 ? stats.ios.sum / stats.ios.count : null;\n        const androidRating = stats.android.count > 0 ? stats.android.sum / stats.android.count : null;\n        \n        return {\n          date,\n          ios: iosRating,\n          android: androidRating\n        };\n      });\n  };\n\n  // 手动刷新评分\n  const handleRefreshReviews = async (appId: number, platform: 'ios' | 'android') => {\n    setRefreshing(true);\n    try {\n      await axios.post(`/api/apps/${appId}/refresh`, { platform });\n      message.success(`${platform === 'ios' ? 'App Store' : 'Play Store'} 评分更新成功`);\n      // 重新获取评论\n      await fetchReviews(appId);\n    } catch (error) {\n      message.error(`${platform === 'ios' ? 'App Store' : 'Play Store'} 评分更新失败`);\n    } finally {\n      setRefreshing(false);\n    }\n  };\n\n  // 刷新最新评论\n  const handleRefreshLatestReviews = async (appId: number) => {\n    setRefreshing(true);\n    try {\n      await axios.post(`/api/apps/${appId}/refresh/latest`, { limit: 100 });\n      message.success('最新评论更新成功');\n      // 重新获取评论\n      await fetchReviews(appId);\n    } catch (error) {\n      message.error('最新评论更新失败');\n    } finally {\n      setRefreshing(false);\n    }\n  };\n\n  // 导出评论\n  const handleExportReviews = async (appId: number) => {\n    try {\n      message.loading('正在准备导出文件...', 1);\n      // 使用 window.open 直接下载文件\n      window.open(`/api/apps/${appId}/export`, '_blank');\n      message.success('评论导出成功');\n    } catch (error) {\n      message.error('评论导出失败');\n    }\n  };\n\n  // 分离 iOS 和 Android 评论\n  const iosReviews = reviews.filter(review => review.platform === 'ios');\n  const androidReviews = reviews.filter(review => review.platform === 'android');\n\n  // 计算当前均分\n  const calculateAverageRating = (reviews: Review[]) => {\n    if (reviews.length === 0) return 0;\n    const sum = reviews.reduce((acc, review) => acc + review.rating, 0);\n    return Number((sum / reviews.length).toFixed(1));\n  };\n\n  const iosAverageRating = calculateAverageRating(iosReviews);\n  const androidAverageRating = calculateAverageRating(androidReviews);\n\n  return (\n    <div style={{ padding: '24px' }}>\n      <Row gutter={[16, 16]} justify=\"space-between\" align=\"middle\">\n        <Col>\n          <h2>应用列表</h2>\n        </Col>\n        <Col>\n          <Button \n            type=\"primary\" \n            icon={<PlusOutlined />}\n            onClick={() => setIsModalVisible(true)}\n          >\n            添加应用\n          </Button>\n        </Col>\n      </Row>\n\n      <Row gutter={[16, 16]} style={{ marginTop: '16px' }}>\n        {apps.map(app => (\n          <Col key={app.id} xs={24} sm={12} md={8} lg={6}>\n            <Card\n              title={app.name}\n              extra={\n                <div onClick={e => e.stopPropagation()}>\n                  <Button\n                    type=\"text\"\n                    icon={<EditOutlined />}\n                    onClick={() => {\n                      setEditingApp(app);\n                      form.setFieldsValue(app);\n                    }}\n                  />\n                  <Popconfirm\n                    title=\"确定要删除这个应用吗？\"\n                    onConfirm={() => handleDeleteApp(app.id)}\n                    okText=\"确定\"\n                    cancelText=\"取消\"\n                  >\n                    <Button type=\"text\" danger icon={<DeleteOutlined />} />\n                  </Popconfirm>\n                </div>\n              }\n              hoverable\n              onClick={() => {\n                setSelectedApp(app);\n                fetchReviews(app.id);\n              }}\n            >\n              <p>平台: {app.platform}</p>\n              {app.app_store_id && <p>App Store ID: {app.app_store_id}</p>}\n              {app.play_store_id && <p>Play Store ID: {app.play_store_id}</p>}\n            </Card>\n          </Col>\n        ))}\n      </Row>\n\n      {selectedApp && (\n        <Card style={{ marginTop: '24px' }}>\n          <Row justify=\"space-between\" align=\"middle\">\n            <Col>\n              <h3>{selectedApp.name} 评分趋势</h3>\n            </Col>\n            <Col>\n              <Space size=\"middle\">\n                {selectedApp.platform !== 'android' && (\n                  <Button\n                    type=\"primary\"\n                    icon={<SyncOutlined spin={refreshing} />}\n                    onClick={() => handleRefreshReviews(selectedApp.id, 'ios')}\n                    loading={refreshing}\n                  >\n                    更新 App Store\n                  </Button>\n                )}\n                {selectedApp.platform !== 'ios' && (\n                  <Button\n                    type=\"primary\"\n                    icon={<SyncOutlined spin={refreshing} />}\n                    onClick={() => handleRefreshReviews(selectedApp.id, 'android')}\n                    loading={refreshing}\n                  >\n                    更新 Play Store\n                  </Button>\n                )}\n                <Button\n                  type=\"default\"\n                  icon={<SyncOutlined spin={refreshing} />}\n                  onClick={() => handleRefreshLatestReviews(selectedApp.id)}\n                  loading={refreshing}\n                >\n                  刷新最新评论\n                </Button>\n                <Button\n                  type=\"default\"\n                  icon={<DownloadOutlined />}\n                  onClick={() => handleExportReviews(selectedApp.id)}\n                >\n                  导出评论\n                </Button>\n              </Space>\n            </Col>\n          </Row>\n          {loading ? (\n            <div style={{ textAlign: 'center', padding: '40px' }}>\n              <Spin />\n            </div>\n          ) : (\n            <>\n              <ResponsiveContainer width=\"100%\" height={400}>\n                <LineChart data={calculateRatingStats()}>\n                  <CartesianGrid strokeDasharray=\"3 3\" />\n                  <XAxis dataKey=\"date\" />\n                  <YAxis domain={[0, 5]} />\n                  <Tooltip \n                    formatter={(value: number) => value ? value.toFixed(2) : '暂无数据'} \n                    labelFormatter={(label) => `${label} 月度均分`}\n                  />\n                  <Legend />\n                  <Line \n                    type=\"monotone\" \n                    dataKey=\"ios\" \n                    name=\"iOS\" \n                    stroke=\"#8884d8\" \n                    connectNulls \n                  />\n                  <Line \n                    type=\"monotone\" \n                    dataKey=\"android\" \n                    name=\"Android\" \n                    stroke=\"#82ca9d\" \n                    connectNulls \n                  />\n                </LineChart>\n              </ResponsiveContainer>\n              \n              <div style={{ marginTop: '24px' }}>\n                <h3>最新评论</h3>\n                <Tabs defaultActiveKey=\"ios\">\n                  <Tabs.TabPane \n                    tab={`iOS 评论 (${iosAverageRating}⭐)`}\n                    key=\"ios\"\n                  >\n                    <Row gutter={[16, 16]}>\n                      {iosReviews\n                        .slice(\n                          (currentPage.ios - 1) * PAGE_SIZE,\n                          currentPage.ios * PAGE_SIZE\n                        )\n                        .map(review => (\n                          <Col key={review.id} span={24}>\n                            <Card size=\"small\">\n                              <p>评分: {'⭐'.repeat(review.rating)}</p>\n                              <p>内容: \n                                <Paragraph\n                                  ellipsis={{ \n                                    rows: 2,\n                                    expandable: true,\n                                    symbol: '展开'\n                                  }}\n                                >\n                                  {review.content}\n                                </Paragraph>\n                              </p>\n                              <p>作者: {review.author}</p>\n                              <p>时间: {new Date(review.created_at).toLocaleString()}</p>\n                            </Card>\n                          </Col>\n                        ))}\n                      {iosReviews.length === 0 && (\n                        <Col span={24}>\n                          <Card size=\"small\">\n                            <p>暂无 iOS 评论</p>\n                          </Card>\n                        </Col>\n                      )}\n                    </Row>\n                    {iosReviews.length > 0 && (\n                      <div style={{ textAlign: 'right', marginTop: '16px' }}>\n                        <Pagination\n                          current={currentPage.ios}\n                          onChange={(page) => setCurrentPage(prev => ({ ...prev, ios: page }))}\n                          total={iosReviews.length}\n                          pageSize={PAGE_SIZE}\n                          showTotal={(total) => `共 ${total} 条评论`}\n                        />\n                      </div>\n                    )}\n                  </Tabs.TabPane>\n                  <Tabs.TabPane \n                    tab={`Android 评论 (${androidAverageRating}⭐)`}\n                    key=\"android\"\n                  >\n                    <Row gutter={[16, 16]}>\n                      {androidReviews\n                        .slice(\n                          (currentPage.android - 1) * PAGE_SIZE,\n                          currentPage.android * PAGE_SIZE\n                        )\n                        .map(review => (\n                          <Col key={review.id} span={24}>\n                            <Card size=\"small\">\n                              <p>评分: {'⭐'.repeat(review.rating)}</p>\n                              <p>内容: \n                                <Paragraph\n                                  ellipsis={{ \n                                    rows: 2,\n                                    expandable: true,\n                                    symbol: '展开'\n                                  }}\n                                >\n                                  {review.content}\n                                </Paragraph>\n                              </p>\n                              <p>作者: {review.author}</p>\n                              <p>时间: {new Date(review.created_at).toLocaleString()}</p>\n                            </Card>\n                          </Col>\n                        ))}\n                      {androidReviews.length === 0 && (\n                        <Col span={24}>\n                          <Card size=\"small\">\n                            <p>暂无 Android 评论</p>\n                          </Card>\n                        </Col>\n                      )}\n                    </Row>\n                    {androidReviews.length > 0 && (\n                      <div style={{ textAlign: 'right', marginTop: '16px' }}>\n                        <Pagination\n                          current={currentPage.android}\n                          onChange={(page) => setCurrentPage(prev => ({ ...prev, android: page }))}\n                          total={androidReviews.length}\n                          pageSize={PAGE_SIZE}\n                          showTotal={(total) => `共 ${total} 条评论`}\n                        />\n                      </div>\n                    )}\n                  </Tabs.TabPane>\n                </Tabs>\n              </div>\n            </>\n          )}\n        </Card>\n      )}\n\n      <Modal\n        title={editingApp ? \"修改应用\" : \"添加应用\"}\n        visible={isModalVisible || !!editingApp}\n        onCancel={() => {\n          setIsModalVisible(false);\n          setEditingApp(null);\n          form.resetFields();\n        }}\n        footer={null}\n      >\n        <Form\n          form={form}\n          onFinish={editingApp ? handleEditApp : handleAddApp}\n          layout=\"vertical\"\n        >\n          <Form.Item\n            name=\"name\"\n            label=\"应用名称\"\n            rules={[{ required: true }]}\n          >\n            <Input />\n          </Form.Item>\n          \n          <Form.Item\n            name=\"platform\"\n            label=\"平台\"\n            rules={[{ required: true }]}\n          >\n            <Select>\n              <Select.Option value=\"ios\">iOS</Select.Option>\n              <Select.Option value=\"android\">Android</Select.Option>\n              <Select.Option value=\"both\">双平台</Select.Option>\n            </Select>\n          </Form.Item>\n          \n          <Form.Item\n            name=\"app_store_country\"\n            label=\"App Store 地区\"\n            initialValue=\"cn\"\n          >\n            <Select>\n              {Object.entries(countries).map(([code, name]) => (\n                <Select.Option key={code} value={code}>\n                  {name}\n                </Select.Option>\n              ))}\n            </Select>\n          </Form.Item>\n          \n          <Form.Item\n            name=\"play_store_country\"\n            label=\"Play Store 地区\"\n            initialValue=\"cn\"\n          >\n            <Select>\n              {Object.entries(countries).map(([code, name]) => (\n                <Select.Option key={code} value={code}>\n                  {name}\n                </Select.Option>\n              ))}\n            </Select>\n          </Form.Item>\n          \n          <Form.Item\n            name=\"app_store_id\"\n            label=\"App Store ID\"\n            rules={[\n              {\n                pattern: /^\\d+$/,\n                message: 'App Store ID 必须是数字'\n              }\n            ]}\n          >\n            <Input placeholder=\"例如：414478124\" />\n          </Form.Item>\n          \n          <Form.Item\n            name=\"play_store_id\"\n            label=\"Play Store ID\"\n          >\n            <Input />\n          </Form.Item>\n          \n          <Form.Item>\n            <Button type=\"primary\" htmlType=\"submit\">\n              提交\n            </Button>\n          </Form.Item>\n        </Form>\n      </Modal>\n\n      <Modal\n        title=\"请输入授权码\"\n        visible={authModalVisible}\n        onOk={async () => {\n          try {\n            if (!authCode) {\n              message.error('授权码不能为空');\n              return;\n            }\n            await authAction();\n            localStorage.setItem('authCode', authCode);\n            setAuthModalVisible(false);\n          } catch (error) {\n            message.error('操作失败');\n            localStorage.removeItem('authCode');\n          }\n        }}\n        onCancel={() => {\n          setAuthModalVisible(false);\n          setAuthAction(() => Promise.resolve());\n          setAuthCode('');\n        }}\n      >\n        <Input.Password\n          value={authCode}\n          onChange={e => setAuthCode(e.target.value)}\n          placeholder=\"请输入授权码\"\n        />\n      </Modal>\n    </div>\n  );\n}; ","import React from 'react';\nimport { Layout } from 'antd';\nimport { AppList } from './components/AppList';\nimport './App.less';\n\nconst { Header, Content } = Layout;\n\nconst App: React.FC = () => {\n  return (\n    <Layout>\n      <Header style={{ background: '#fff', padding: '0 24px' }}>\n        <h1>应用评分追踪系统</h1>\n      </Header>\n      <Content>\n        <AppList />\n      </Content>\n    </Layout>\n  );\n};\n\nexport default App; ","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}